# Linux进阶

## 账号管理

Linux系统是一个多用户多任务的分时操作系统,任何一个要使用系统资源的用户,都必须首先向系统管理员申请一个账号,然后以这个账号的身份进入系统。

用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪,并控制他们对系统资源的访问;另一方面也可以帮助用户组织文件,并为用户提供安全性保护。

每个用户账号都拥有一个唯一的用户名和各自的口令。

用户在登录时键入正确的用户名和口令后,就能够进入系统和自己的主目录。

实现用户账号的管理,要完成的工作主要有如下几个方面:

-   用户账号的添加、删除与修改。
-   用户口令的管理。
-   用户组的管理。

### 添加用户

`useradd`命令

useradd -选项 用户名
-m参数：自动创建这个用户的主目录`/home/用户名`
-G参数：给用户分配组

```bash
~$ seradd -m abc  #创建一个用户
```

Linux中一切皆文件,这里的添加用户说白了就是往某-个文件中写入用户的信息了! /etc/passwd

```bash
~$ cat /etc/passwd
abc:x:1002:1002::/home/abc:/bin/bash
```

### 删除用户

`userdel`命令

userdel -选项 用户名

-m参数：清除用户的目录页

```bash
~$ userdel -r abc #删除用户的时候把它的目录也删除掉
```

### 修改用户

`usermod`命令

usermod 对应修改的内容 用户名

```bash
~$ usermode -d /home/123 abc
```

修改完毕后需要查看配置文件`/etc/passwd`

### 切换用户

1.  切换用户的命令为: `su username` [username是你的用户名]
2.  从普通用户切换到root用户,还可以使用命令: `sudo su`
3.  在终端输入exit或logout或使用快捷方式ctrl+d ,可以退回到原来用户,其实ctrl+d也是执行的exit命令
4.  在切换用户时,如果想在切换用户之后使用新用户的工作环境,可以在su和username之间加`-`,例如: [su- root]
    $表示普通用户，#表示超级用户,也就是root用户

### 设置密码

我们一般通过root创建用户的时候，要配置密码。

超级用户可以设置任何一个用户的密码：

```bash
passwd username 
```

普通用户设置当前密码：

```bash
passwd
```

### 锁定账号

冻结账号，冻结后就无法登陆系统

```bash
passwd -l cqh #锁定之后这个用户就不能再登录了
passwd -d cqh #把密码清空 这样也能防止用户登录
```

-d参数：将密码清空

-l参数：锁定

-u参数：解锁

## 用户组管理

每个用户都有一个用户组,系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同,如Linux下的用户属于与它同名的用户组,这个用户组在创建用户时同时创建。

用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对`/etc/group`文件的更新。

### 创建用户组

`groupadd`命令

```bash
$ groupadd abc
$ cat /etc/group
```

创建完用户组后可以得到一个组的id ,这个id是可以指定的（使用`-g参数 id号`）， 若果不指定就是自增1

### 删除用户组

`groupdel`命令

```bash
$ groupdel abc
$ cat /etc/group
```

### 修改用户组

`groupmod`命令

-g参数：修改用户组id

-n参数：修改用户组名字

```bash
$ groupmod -g 123 -n abcd abc
```

### 切换用户组

`newgrp`命令

```bash
$ newgrp root #切换为root
```

>   配置文件的查看
>
>   `/etc/passwd`
>
>   用户名:口令(不可见) :用户标识号:组标识号:注释性描述:主目录:登录She11
>
>   这个文件中的每一行都代表这一用户,我们可以从这里看出这个用户的主目录在那里,可以看到属于哪一个组。
>
>   登录口令:把真正的加密后的用户口令字存放到`/etc/shadow`文件中,保证我们密码的安全性!
>
>   用户组的所有信息都存放在`/etc/group`文件中。

## 磁盘管理

-   df命令：列出文件系统整体的磁盘使用量（-h参数按MB、GB显示）

-   du命令：检查磁盘空间使用量（-a参数显示子文件）

    `du -sm /*`：检查根目录下每个目录所占用的容量

-   mount命令：将外部设备挂载到mnt目录下，实现访问

    `mount 外部目录 内部目录`

-   unmount命令：卸载，（-f参数强制卸载）

    `unmount -f 挂载位置`

## 进程管理

### 基本概念

1.  在Linux中 ,每一个程序都是有自己的一个进程,每一个进程都有一个id号
2.  每一个进程都会有一个父进程
3.  进程可以有两种存在方式:**前台**或**后台**运行
4.  一般的话**服务都是后台运行**的，基本的程序都是**前台运行**的

### 命令

`ps`命令：查看当前系统中正在执行的各种进程的信息

`-a`参数：显示当前终端所有的进程信息

`-u`参数：以用户的信息显示进程

`-x`参数：显示后台运行进程的参数

`grep`命令：查找符合条件的字符串

```bash
ps-aux|grep mysql  #查看mysql相关进程
```

`ps -ef `：可以查看到父进程的信息

```bash
ps-ef|grep mysql #看父进程
```

`pstree -pu` ：查看进程树

-p参数：显示父id 

-u参数：显示用户组

`kill`：结束进程

`kill -9 pid`：按pid结束强制结束进程