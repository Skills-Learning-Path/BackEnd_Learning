# MySQL

## 初识MySQL

Java EE：企业级Java开发、Web

后台：（连接点：连接数据库JDBC、链接前端（控制，控制视图跳转，和给前端传递数据））

数据库（存数据）

数据库是所有软件体系中最核心的存在

## 数据库

数据库（database）：存数据

概念：数据仓库，软件、安装在操作系统之上

作用：存储数据、管理数据

### 分类

关系型数据库：通过表和表之间，行和列之间的关系进行数据的存储（结构化SQL）

-   MySQL
-   Oracle
-   SQL Server
-   DB2
-   SQLlite

非关系型数据库：key-value，对象存储，通过对象的自身属性来决定（NO-SQL）

-   Redis
-   MongDB

### DBMS（数据库管理系统）

-   数据库的管理软件，科学有效地管理数据，维护和获取数据
-   MySQL -- 数据库管理系统

### MySQL简介

-   关系型数据库管理系统
-   由瑞典MySQL AB 公司开发，属于Oracle旗下产品
-   开源的数据库软件，体积小、速度快、总体拥有成本低
-   适用于中小型网站、大型网站

版本：

-   5.7 稳定
-   8.0

安装建议：

1.  尽量不要使用exe
2.  尽可能使用压缩包安装

### 连接数据库

`mysql -u 用户名 -p密码`

-   修改密码

    ```sql
    update mysql.user set authentication_string=password('123456') where user='root' and Host='localhost';
    ```

-   刷新权限

    ```sql
    flush privileges;
    ```

-   查看所有数据库

    ```sql
    show databses;
    ```

-   切换数据库

    ```sql
    use 数据库名称;
    ```

-   查看数据库中所有的表

    ```sql
    show tables;
    ```

-   查看表中所有信息

    ```sql
    describe 表名;
    ```

-   创建数据库

    ```sql
    create database 数据库名称;
    ```

-   退出连接

    ```sql
    exit; --单行注释
    /**
    多行注释
    */
    ```

## 操作数据库

SQL语言：CRUD

-   DDL定义
-   DML操作
-   DQL查询
-   DCL控制

**mysql关键字不区分大小写**

### 操作数据库

-   创建数据库

    ```sql
    create database [if not exists] 数据库名称;
    ```

-   删除数据库

    ```sql
    drop databse [if exists] 数据库名称;
    ```

-   使用数据库

    ```sql
    use 数据库名称; -- 如果字段名是一个特殊字符，用``包围
    ```

-   查看数据库

    ```sql
    show databses;
    ```

### 数据库的列类型

-   数值
    -   tinyint：十分小的数据，1字节
    -   smallint：较小的数据，2字节
    -   mediumint：中等大小的数据，3字节
    -   **int：标准整数，4字节**
    -   bigint：较大的数据，8字节
    -   float：单精度浮点数，4字节
    -   double：双精度浮点数，8字节
    -   **decimal：字符串形式的浮点数，金融计算**
-   字符串
    -   char：固定大小的字符型，0～255
    -   **varchar：可变字符串，0~65535**
    -   tinytext：微型文本，2^8-1
    -   **text：文本串，2^16-1**
-   时间日期
    -   date：YYYY-MM-DD，日期格式
    -   time：HH:mm:ss，时间格式
    -   **datetime：YYYY-MM-DD HH:mm:ss，日期+时间**
    -   **timestamp：时间戳，1970-01-01到现在的毫秒数**
    -   year：年份表示
-   null
    -   没有值，未知
    -   **注意：不要使用null进行运算，结果为null**

### 数据库的字段属性

-   Unsigned：无符号的整数，不能设置为负数
-   zerofill：零填充，不足的位数用零来填充
-   auto_increment：默认在上一条的记录基础上+1，通常用来设置为唯一的主键，必须是整数类型，也可以自定义主键的起始值和步长
-   not null：不赋值会报错
-   default：设置默认值

注意：一个表中必须存在以下5个字段，表示一个记录存在的意义

1.  id：主键
2.  version：用于乐观锁
3.  is_deleted：伪删除
4.  gmt_create：创建时间
5.  gmt_update：修改时间

### 创建表

```sql
create table if not exists `student` (
	`id` int(4) not null auto_increment comment '学号',
    `name` varchar(30) not null default '匿名' comment '姓名',
    `pwd` varchar(2) not null default '123456' comment '密码',
    `gender` varchar(2) not null default '女' comment '性别',
    `birthday` datetime default null comment '出生日期',
    `address` varchar(100) default null comment '家庭地址',
    `email` varchar(50) default null comment '邮箱',
    primary key (`id`)
) engine=innodb default charset=utf8;
```

格式：

```sql
create table [if not exists] `表名`(
	`字段名` 列类型 [属性] [索引] [注释],
    ......
    `字段名` 列类型 [属性] [索引] [注释]
)[表类型] [表的字符集] [注释];
```



